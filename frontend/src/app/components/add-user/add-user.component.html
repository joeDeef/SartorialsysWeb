<div class="form-container">
  <h2>Agregar Usuario</h2>

  <form (ngSubmit)="onSubmit()" #userForm="ngForm">
    <!-- Nombre -->
    <label for="name">Nombre:</label>
    <input type="text" id="name" [(ngModel)]="user.name" name="name" required #name="ngModel" />
    <div class="error" *ngIf="name.invalid && name.touched">El nombre es obligatorio</div>

    <!-- Apellido -->
    <label for="last_name">Apellido:</label>
    <input type="text" id="last_name" [(ngModel)]="user.last_name" name="last_name" required #lastName="ngModel" />
    <div class="error" *ngIf="lastName.invalid && lastName.touched">El apellido es obligatorio</div>

    <!-- Email -->
    <label for="email">Email:</label>
    <input type="email" id="email" [(ngModel)]="user.email" name="email" required #email="ngModel" />
    <div class="error" *ngIf="email.invalid && email.touched">El email es obligatorio y debe ser válido</div>

    <!-- Contraseña -->
    <label for="password">Contraseña:</label>
    <div class="password-input-wrapper">
      <input 
        type="{{passwordFieldType}}" 
        id="password"
        [(ngModel)]="user.password" 
        name="password" 
        required 
        #password="ngModel" 
        placeholder="Ingresa la contraseña" 
      />
      <button 
        type="button" 
        class="toggle-password-btn" 
        (click)="togglePassword()">
        <i class="fa" [ngClass]="passwordFieldType === 'password' ? 'fa-eye' : 'fa-eye-slash'"></i>
      </button>
    </div>
    <div class="error" *ngIf="password.invalid && password.touched">La contraseña es obligatoria</div>

    <!-- Rol (select) -->
    <label for="role">Rol:</label>
    <select id="role" [(ngModel)]="user.role" name="role" required #role="ngModel">
      <option value="user">Usuario</option>
      <option value="admin">Administrador</option>
    </select>
    <div class="error" *ngIf="role.invalid && role.touched">Debe seleccionar un rol</div>

    <button type="submit" [disabled]="userForm.invalid">Agregar Usuario</button>
  </form>
</div>
